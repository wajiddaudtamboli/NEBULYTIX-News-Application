@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap');

@layer base {
  :root {
    --background: 220 20% 97%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 187 85% 43%;
    --primary-foreground: 0 0% 100%;

    --secondary: 220 14% 96%;
    --secondary-foreground: 222 47% 11%;

    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;

    --accent: 262 83% 58%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 187 85% 43%;

    --radius: 0.75rem;

    --glass-bg: 0 0% 100% / 0.8;
    --glass-border: 220 13% 91% / 0.5;
    --glow-primary: 187 85% 43% / 0.35;
    --glow-accent: 262 83% 58% / 0.25;
    --shadow-color: 222 47% 11% / 0.08;
    --shadow-elevation-low: 0 1px 3px hsl(var(--shadow-color)), 0 1px 2px hsl(var(--shadow-color));
    --shadow-elevation-medium: 0 4px 6px -1px hsl(var(--shadow-color)), 0 2px 4px -1px hsl(var(--shadow-color));
    --shadow-elevation-high: 0 20px 25px -5px hsl(var(--shadow-color)), 0 10px 10px -5px hsl(var(--shadow-color));

    --font-display: 'Space Grotesk', sans-serif;
    --font-body: 'Inter', sans-serif;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 187 85% 43%;
  }

  .dark {
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 9%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 9%;
    --popover-foreground: 210 40% 98%;

    --primary: 187 85% 53%;
    --primary-foreground: 222 47% 6%;

    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;

    --accent: 262 83% 65%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 187 85% 53%;

    --glass-bg: 222 47% 11% / 0.7;
    --glass-border: 210 40% 98% / 0.08;
    --glow-primary: 187 85% 53% / 0.4;
    --glow-accent: 262 83% 65% / 0.3;
    --shadow-color: 0 0% 0% / 0.4;

    --sidebar-background: 222 47% 8%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 187 85% 53%;
    --sidebar-primary-foreground: 222 47% 6%;
    --sidebar-accent: 217 33% 15%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 217 33% 17%;
    --sidebar-ring: 187 85% 53%;
  }
}

@layer base {
  * {
    @apply border-border;
    -webkit-tap-highlight-color: transparent;
  }

  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
    perspective: 1000px;
    overflow-x: hidden;
    min-height: 100vh;
    min-height: 100dvh;
  }

  /* Mobile viewport fix - no extra space */
  @supports (height: 100dvh) {
    body {
      min-height: 100dvh;
    }
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    @apply font-semibold tracking-tight;
  }

  /* Focus states for accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }

  /* Prevent iOS zoom on inputs */
  input, select, textarea {
    font-size: 16px !important;
  }

  /* Mobile touch optimization */
  @media (hover: none) and (pointer: coarse) {
    .card-3d:hover,
    .card-featured:hover {
      transform: none !important;
    }
  }
}

@layer components {
  /* Glass morphism panels */
  .glass-panel {
    @apply backdrop-blur-xl border rounded-xl;
    background: hsl(var(--glass-bg));
    border-color: hsl(var(--glass-border));
    box-shadow: var(--shadow-elevation-low);
  }

  .glass-panel-elevated {
    @apply backdrop-blur-xl border rounded-xl;
    background: hsl(var(--glass-bg));
    border-color: hsl(var(--glass-border));
    box-shadow: var(--shadow-elevation-medium);
  }

  /* 3D Card with depth */
  .card-3d {
    @apply relative rounded-2xl overflow-hidden;
    background: hsl(var(--card));
    box-shadow: 
      0 2px 4px hsl(var(--shadow-color)),
      0 8px 16px hsl(var(--shadow-color)),
      0 16px 32px hsl(var(--shadow-color));
    transform-style: preserve-3d;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .card-3d:hover {
    box-shadow: 
      0 8px 16px hsl(var(--shadow-color)),
      0 24px 48px hsl(var(--shadow-color)),
      0 0 60px hsl(var(--glow-primary));
  }

  /* Featured card variant */
  .card-featured {
    @apply relative rounded-2xl overflow-hidden;
    background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--secondary)) 100%);
    box-shadow: 
      0 4px 8px hsl(var(--shadow-color)),
      0 12px 24px hsl(var(--shadow-color)),
      0 0 80px hsl(var(--glow-primary));
    border: 1px solid hsl(var(--primary) / 0.2);
  }

  /* Glow effects */
  .glow-primary {
    box-shadow: 0 0 40px hsl(var(--glow-primary)),
                0 0 80px hsl(var(--glow-primary));
  }

  .glow-accent {
    box-shadow: 0 0 40px hsl(var(--glow-accent)),
                0 0 80px hsl(var(--glow-accent));
  }

  .glow-subtle {
    box-shadow: 0 0 20px hsl(var(--glow-primary));
  }

  /* Text gradients */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--accent)) 100%);
  }

  .text-gradient-subtle {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(90deg, hsl(var(--foreground)) 0%, hsl(var(--muted-foreground)) 100%);
  }

  /* Background gradients */
  .bg-gradient-hero {
    background: 
      radial-gradient(ellipse 80% 50% at 50% -20%, hsl(var(--primary) / 0.15) 0%, transparent 50%),
      radial-gradient(ellipse 60% 40% at 80% 50%, hsl(var(--accent) / 0.1) 0%, transparent 50%),
      hsl(var(--background));
  }

  .bg-gradient-card {
    background: linear-gradient(180deg,
      hsl(var(--card)) 0%,
      hsl(var(--secondary) / 0.5) 100%);
  }

  .bg-gradient-radial {
    background: radial-gradient(circle at 50% 50%, hsl(var(--primary) / 0.1) 0%, transparent 70%);
  }

  /* Interactive elements */
  .hover-lift {
    @apply transition-all duration-300 ease-out;
  }

  .hover-lift:hover {
    transform: translateY(-8px) translateZ(20px);
    box-shadow: 
      0 20px 40px hsl(var(--shadow-color)),
      0 0 60px hsl(var(--glow-primary));
  }

  .hover-tilt {
    transform-style: preserve-3d;
    transition: transform 0.3s ease;
  }

  /* Button enhancements */
  .btn-depth {
    position: relative;
    @apply transition-all duration-200;
  }

  .btn-depth::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / 0.1);
  }

  .btn-depth:hover {
    transform: translateY(-2px);
  }

  .btn-depth:active {
    transform: translateY(0);
  }

  /* Badge/Tag with contrast */
  .tag-elevated {
    @apply px-3 py-1.5 rounded-full text-xs font-semibold;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow: 
      0 2px 8px hsl(var(--primary) / 0.4),
      inset 0 1px 0 hsl(0 0% 100% / 0.2);
  }

  /* Save button feedback animation */
  .save-btn {
    @apply relative overflow-hidden;
  }

  .save-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, hsl(var(--primary) / 0.4) 0%, transparent 70%);
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s ease;
  }

  .save-btn.saved::after {
    animation: saveRipple 0.5s ease-out;
  }

  /* Skeleton with better shimmer */
  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 0%,
      hsl(var(--muted-foreground) / 0.15) 50%,
      hsl(var(--muted)) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  /* Container with max-width control */
  .content-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .content-container-narrow {
    @apply max-w-5xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Animated background dots */
  .bg-dots {
    background-image: radial-gradient(hsl(var(--muted-foreground) / 0.15) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  /* Floating animation utilities */
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-float-delayed {
    animation: float 6s ease-in-out infinite 2s;
  }

  .animate-pulse-glow {
    animation: pulseGlow 3s ease-in-out infinite;
  }

  .animate-gradient {
    background-size: 200% 200%;
    animation: gradientShift 8s ease infinite;
  }

  .animate-spin-slow {
    animation: spin-slow 20s linear infinite;
  }

  /* Line clamp utilities with proper handling */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

/* Keyframe animations */
@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(2deg);
  }
}

@keyframes pulseGlow {
  0%, 100% {
    opacity: 0.6;
    box-shadow: 0 0 20px hsl(var(--glow-primary));
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 40px hsl(var(--glow-primary)), 0 0 60px hsl(var(--glow-accent));
  }
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes saveRipple {
  0% {
    opacity: 1;
    transform: scale(0);
  }
  100% {
    opacity: 0;
    transform: scale(2.5);
  }
}

@keyframes slideInFromBottom {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Page transition wrapper */
.page-transition {
  animation: slideInFromBottom 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}

/* Scroll-driven animations for modern browsers */
@supports (animation-timeline: scroll()) {
  .scroll-reveal {
    animation: scaleIn linear;
    animation-timeline: view();
    animation-range: entry 0% cover 40%;
  }
}
